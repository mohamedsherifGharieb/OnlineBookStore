<div 
  class="book-card group bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col"
  [ngStyle]="style" 
  [ngClass]="className">
  
  <!-- Book Cover -->
  <div class="relative aspect-[3/4] overflow-hidden bg-gray-100">
    <img 
      [attr.src]="coverUrl" 
      [attr.alt]="'Cover of ' + title" 
      class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
    />
    
    <!-- Quick Add Overlay -->
    <div class="absolute inset-0 bg-gray-200/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
      <button 
        (click)="onBuy($event)"
        class="bg-amber-100 hover:bg-amber-200 text-gray-800 font-medium py-2.5 px-5 rounded-lg shadow-lg flex items-center gap-2 transition-all cursor-pointer"
        [attr.aria-label]="'Quick add ' + title">
        <!-- Shopping Cart Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="8" cy="21" r="1"/>
          <circle cx="19" cy="21" r="1"/>
          <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
        </svg>
        Quick Add
      </button>
    </div>
  </div>

  <!-- Book Info -->
  <div class="flex-1 p-5 flex flex-col">
    <!-- Title -->
    <h3 class="book-title font-serif font-semibold text-gray-900 text-sm mb-1 line-clamp-2 leading-snug">
      {{ title }}
    </h3>

    <!-- Author -->
    <p class="book-author text-sm text-gray-600 mb-3">{{ author }}</p>

    <!-- Store -->
    <div class="flex items-center gap-1.5 text-xs mb-3" style="color: #904d1d;">
      <!-- Store Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/>
        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
        <path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/>
        <path d="M2 7h20"/>
        <path d="M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"/>
      </svg>
      <span>{{ store }}</span>
    </div>

    <!-- Rating -->
    <div class="flex items-center gap-1 mb-10">
      <ng-container *ngFor="let s of stars; let i = index">
        <svg 
          xmlns="http://www.w3.org/2000/svg"
          width="16" 
          height="16" 
          viewBox="0 0 24 24" 
          [attr.fill]="isStarFilled(i) ? '#ff8c00' : '#ffc680'"
          stroke="none"
          aria-hidden="true">
          <path d="M12 .587l3.668 7.431L23.5 9.75l-5.834 5.686L19.335 24 12 19.77 4.665 24l1.669-8.564L.5 9.75l7.832-1.732L12 .587z"/>
        </svg>
      </ng-container>

      <span class="ml-1 text-sm text-gray-600 font-medium">({{ rating | number:'1.1-1' }})</span>
    </div>

    <!-- Price -->
    <div class="mt-auto mb-3">
      <span class="text-2xl font-bold " style="color: #d2691e;">
        ${{ price | number:'1.2-2' }}
      </span>
    </div>

    <!-- Add to Cart Button -->
    <button 
      (click)="onBuy($event)"
      class="w-full bg-[#ff8c00] hover:bg-[#ffb86b] text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors active:scale-[0.98] cursor-pointer"
      [attr.aria-label]="'Add ' + title + ' to cart'">
      <!-- Shopping Cart Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="21" r="1"/>
        <circle cx="19" cy="21" r="1"/>
        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
      </svg>
      Add to Cart
    </button>
  </div>
</div>